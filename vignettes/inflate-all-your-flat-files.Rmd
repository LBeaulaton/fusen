---
title: "Inflate all your flat files"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{inflate-all-your-flat-files}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
library(fusen)
```

<!-- WARNING - This vignette is generated by {fusen} from dev/flat_inflate_all.Rmd: do not edit by hand -->

The `inflate_all()` function allows the user to inflate all the flat files present in the `dev/` folder at once.

Prior to be able to inflate all the flat files, some checks are performed, to assess whether the flat files are available to be used by `inflate_all()`.

Please note that `inflate_all()` requires the existence of a `config_fusen.yml` file. This file is not existing in versions of {fusen} prior to v0.5.0.9000.

If you are working in a project initiated with a version of {fusen} prior to v0.5.0.9000, please run `inflate()` for each of the flat files you want to work with in order to create the appropriated `config_fusen.yml` file.

If you are already familiar to `config_fusen.yml` but were working with a dev version of {fusen} prior to v0.5.0.9001, your `config_fusen.yml` file does not contain inflate-related parameters. You will have to inflate again you flat files in order to complete `config_fusen.yml` with the `inflate()` parameters.


# inflate_all

    

  

```{r example-inflate_all, eval = FALSE}
#' \dontrun{
# Usually, in the current package run inflate_all() directly
# This function has an impact on the current user workspace
inflate_all()
#' }

# You can also inflate_all flats of another package as follows
# A dummy package with a flat file
dummypackage <- tempfile("inflateall")
dir.create(dummypackage)
fill_description(pkg = dummypackage, fields = list(Title = "Dummy Package"))
dev_file <- add_minimal(
  pkg = dummypackage,
  overwrite = TRUE,
  open = FALSE
)

# Inflate the flat file once
usethis::with_project(dummypackage, {
  # if you are starting from a brand new package, inflate_all() will crash
  # it's because of the absence of a fusen config file
  # inflate_all()

  # you need to inflate manually your flat file first
  inflate(
    pkg = dummypackage,
    flat_file = flat_file,
    vignette_name = "Get started",
    check = FALSE,
    open_vignette = FALSE,
    document = TRUE,
    overwrite = "yes"
  )

  # your config file has been created
  config_yml_ref <-
    yaml::read_yaml(getOption("fusen.config_file", default = "dev/config_fusen.yaml"))
})

# Next time, you can run inflate_all() directly
usethis::with_project(dummypackage, {
  # now you can run inflate_all()
  inflate_all()
})

# Clean the temporary directory
unlink(dummypackage, recursive = TRUE)
```

  

